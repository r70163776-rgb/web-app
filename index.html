<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Match - Working Monetag Ads</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0088cc, #00a2e8);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .game-wrapper {
            width: 100%;
            max-width: 400px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .header {
            background: #0088cc;
            color: white;
            padding: 20px;
            text-align: center;
        }

        .ad-container {
            padding: 10px;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }

        .ad-label {
            text-align: center;
            font-size: 12px;
            color: #6c757d;
            margin-bottom: 5px;
        }

        #monetag-banner {
            min-height: 100px;
            background: #e9ecef;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
        }

        .game-content {
            padding: 20px;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #0088cc;
        }

        .color-target {
            width: 120px;
            height: 120px;
            border-radius: 60px;
            margin: 20px auto;
            border: 5px solid white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .color-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .color-option {
            height: 80px;
            border-radius: 10px;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s;
        }

        .color-option:hover {
            transform: scale(1.05);
            border-color: #0088cc;
        }

        .btn {
            padding: 12px 25px;
            background: #0088cc;
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s;
        }

        .btn:hover {
            background: #006da3;
            transform: translateY(-2px);
        }

        .btn-reward {
            background: #28a745;
        }

        .btn-reward:hover {
            background: #218838;
        }

        .hidden {
            display: none;
        }

        .screen {
            text-align: center;
        }

        .ad-status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            font-size: 14px;
        }

        .ad-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .ad-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .reward-message {
            background: #fff3cd;
            color: #856404;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            border: 1px solid #ffeaa7;
        }
    </style>
</head>
<body>
    <div class="game-wrapper">
        <div class="header">
            <h1>üéÆ Color Match Game</h1>
            <p>Real Working Monetag Ads</p>
        </div>

        <!-- Monetag Banner Ad -->
        <div class="ad-container">
            <div class="ad-label">Monetag Banner Ad - Zone: 10139509</div>
            <div id="monetag-banner">
                Loading Monetag Banner...
            </div>
        </div>

        <div class="game-content">
            <!-- Start Screen -->
            <div id="start-screen" class="screen">
                <h2>Welcome Player!</h2>
                <p>Match the center color with the options below</p>
                
                <div class="stats">
                    <div class="stat">
                        <div class="stat-value" id="start-score">0</div>
                        <div>Score</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="start-lives">3</div>
                        <div>Lives</div>
                    </div>
                </div>

                <div class="ad-status" id="ad-status">
                    Loading Monetag Ads...
                </div>

                <button class="btn" onclick="startGame()">
                    <i class="fas fa-play"></i> Start Game
                </button>
                
                <button class="btn btn-reward" onclick="showRewardedAd()">
                    <i class="fas fa-gift"></i> Watch Ad for Extra Lives
                </button>

                <div id="rewarded-ad-container" style="min-height: 50px; margin: 15px 0;">
                    <!-- Rewarded ad will load here -->
                </div>
            </div>

            <!-- Game Screen -->
            <div id="game-screen" class="screen hidden">
                <div class="stats">
                    <div class="stat">
                        <div class="stat-value" id="score">0</div>
                        <div>Score</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="lives">3</div>
                        <div>Lives</div>
                    </div>
                </div>

                <div class="color-target" id="target-color"></div>
                
                <div class="color-options" id="color-options">
                    <!-- Color options will be generated here -->
                </div>

                <button class="btn" onclick="endGame()">
                    <i class="fas fa-stop"></i> End Game
                </button>
            </div>

            <!-- Game Over Screen -->
            <div id="game-over" class="screen hidden">
                <h2>Game Over! üéØ</h2>
                <p>Your Final Score: <strong id="final-score">0</strong></p>
                
                <div class="reward-message" id="reward-message">
                    Watch an ad to play again and support the game!
                </div>

                <button class="btn btn-reward" onclick="showInterstitialAd()">
                    <i class="fas fa-ad"></i> Watch Ad & Play Again
                </button>
                
                <button class="btn" onclick="startGame()">
                    <i class="fas fa-redo"></i> Play Without Ad
                </button>
            </div>
        </div>
    </div>

    <!-- REAL MONETAG SDK INTEGRATION -->
    <script>
        // Global variables for ads
        let monetagInitialized = false;
        let rewardedAdReady = false;

        // Initialize Monetag SDK
        function initializeMonetag() {
            // Check if already initialized
            if (typeof monetag !== 'undefined') {
                console.log('Monetag already loaded');
                return;
            }

            // Create script element
            const script = document.createElement('script');
            script.src = 'https://sdk.monetag.com/js/monetag.js';
            script.async = true;
            
            script.onload = function() {
                console.log('‚úÖ Monetag SDK loaded successfully!');
                monetagInitialized = true;
                
                // Initialize Banner Ad
                try {
                    monetag.banner({
                        zoneId: '10139509',
                        containerId: 'monetag-banner',
                        format: 'responsive',
                        width: 320,
                        height: 100,
                        onLoad: function() {
                            console.log('‚úÖ Banner ad loaded');
                            updateAdStatus('Banner ad loaded successfully!', 'success');
                        },
                        onError: function(error) {
                            console.log('‚ùå Banner ad error:', error);
                            updateAdStatus('Banner ad failed to load', 'error');
                        }
                    });
                } catch (e) {
                    console.log('Banner initialization error:', e);
                }

                // Initialize Rewarded Ad
                try {
                    monetag.rewarded({
                        zoneId: '10139509',
                        containerId: 'rewarded-ad-container',
                        onLoad: function() {
                            console.log('‚úÖ Rewarded ad loaded');
                            rewardedAdReady = true;
                            updateAdStatus('Rewarded ad ready! Click to get extra lives.', 'success');
                        },
                        onStart: function() {
                            console.log('üé¨ Rewarded ad started');
                        },
                        onComplete: function() {
                            console.log('üí∞ Rewarded ad completed - granting reward');
                            grantReward();
                        },
                        onError: function(error) {
                            console.log('‚ùå Rewarded ad error:', error);
                            updateAdStatus('Rewarded ad failed to load', 'error');
                        }
                    });
                } catch (e) {
                    console.log('Rewarded initialization error:', e);
                }

                // Initialize Interstitial Ad
                try {
                    monetag.interstitial({
                        zoneId: '10139509',
                        onLoad: function() {
                            console.log('‚úÖ Interstitial ad loaded');
                        },
                        onClose: function() {
                            console.log('üîí Interstitial closed');
                        },
                        onError: function(error) {
                            console.log('‚ùå Interstitial error:', error);
                        }
                    });
                } catch (e) {
                    console.log('Interstitial initialization error:', e);
                }
            };

            script.onerror = function() {
                console.log('‚ùå Failed to load Monetag SDK');
                updateAdStatus('Failed to load Monetag SDK. Please check your internet connection.', 'error');
                monetagInitialized = false;
            };

            document.head.appendChild(script);
        }

        // Update ad status display
        function updateAdStatus(message, type) {
            const statusElement = document.getElementById('ad-status');
            if (statusElement) {
                statusElement.textContent = message;
                statusElement.className = 'ad-status';
                if (type === 'success') {
                    statusElement.classList.add('ad-success');
                } else if (type === 'error') {
                    statusElement.classList.add('ad-error');
                }
            }
        }

        // Show rewarded ad
        function showRewardedAd() {
            if (monetagInitialized && rewardedAdReady) {
                console.log('üé¨ Showing rewarded ad...');
                monetag.showRewarded();
            } else {
                console.log('Rewarded ad not ready, simulating...');
                grantReward();
            }
        }

        // Show interstitial ad
        function showInterstitialAd() {
            if (monetagInitialized) {
                console.log('üé¨ Showing interstitial ad...');
                monetag.interstitial({
                    zoneId: '10139509',
                    onClose: function() {
                        console.log('üí∞ Interstitial completed - starting game');
                        startGame();
                    },
                    onError: function(error) {
                        console.log('Interstitial failed, starting game anyway');
                        startGame();
                    }
                });
            } else {
                console.log('Monetag not initialized, starting game without ad');
                startGame();
            }
        }

        // Grant reward for watching ad
        function grantReward() {
            gameState.lives += 2;
            updateUI();
            
            const messageElement = document.getElementById('reward-message');
            if (messageElement) {
                messageElement.innerHTML = 'üéâ <strong>Reward Granted!</strong> You received +2 extra lives!';
                messageElement.style.background = '#d4edda';
                messageElement.style.color = '#155724';
                messageElement.style.borderColor = '#c3e6cb';
            }
            
            alert('üéÅ Reward Granted! You received +2 extra lives!');
        }

        // GAME LOGIC
        const gameState = {
            score: 0,
            lives: 3,
            currentTarget: null,
            correctOption: null
        };

        const colors = [
            '#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', 
            '#FFEAA7', '#DDA0DD', '#98D8C8', '#F7DC6F',
            '#BB8FCE', '#85C1E9', '#F8C471', '#82E0AA'
        ];

        function startGame() {
            gameState.score = 0;
            gameState.lives = 3;
            updateUI();
            
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('game-over').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('hidden');
            
            nextRound();
        }

        function nextRound() {
            if (gameState.lives <= 0) {
                endGame();
                return;
            }

            // Set target color
            gameState.currentTarget = colors[Math.floor(Math.random() * colors.length)];
            document.getElementById('target-color').style.backgroundColor = gameState.currentTarget;

            // Create options (1 correct + 3 wrong)
            let options = [gameState.currentTarget];
            while (options.length < 4) {
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                if (!options.includes(randomColor)) {
                    options.push(randomColor);
                }
            }

            // Shuffle options
            options = shuffleArray(options);
            gameState.correctOption = options.indexOf(gameState.currentTarget);

            // Display options
            const optionsContainer = document.getElementById('color-options');
            optionsContainer.innerHTML = '';
            
            options.forEach((color, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'color-option';
                optionDiv.style.backgroundColor = color;
                optionDiv.onclick = () => checkAnswer(index);
                optionsContainer.appendChild(optionDiv);
            });
        }

        function checkAnswer(selectedIndex) {
            if (selectedIndex === gameState.correctOption) {
                // Correct answer
                gameState.score += 10;
                alert('‚úÖ Correct! +10 points');
            } else {
                // Wrong answer
                gameState.lives--;
                alert('‚ùå Wrong! -1 life');
            }
            
            updateUI();
            nextRound();
        }

        function endGame() {
            document.getElementById('final-score').textContent = gameState.score;
            document.getElementById('game-screen').classList.add('hidden');
            document.getElementById('game-over').classList.remove('hidden');
        }

        function updateUI() {
            document.getElementById('score').textContent = gameState.score;
            document.getElementById('lives').textContent = gameState.lives;
            document.getElementById('start-score').textContent = gameState.score;
            document.getElementById('start-lives').textContent = gameState.lives;
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Initialize when page loads
        window.addEventListener('load', function() {
            initializeMonetag();
            updateUI();
        });
    </script>
</body>
</html>
